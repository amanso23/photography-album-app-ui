---

import Breadcrumb from '@/components/Breadcrumb.astro';
import SectionContainer from '@/components/SectionContainer.astro';
import Layout from '@/layouts/Layout.astro';
import { albums } from '@/lib/albums';

export const getStaticPaths = async() => {
    return albums.flatMap((album) => {
        return album.gallery.map((image) => {
            return {
                params: 
                    {   
                        albumId: album.id, 
                        imageId: image.id
                    },
                props: 
                    {
                        ...image, 
                        albumTitle: album.title, 
                        albumBackground: album.background
                    }
            }
        })
    })
}

const { 
    albumId,
    imageId
} = Astro.params;

const { 
    title,
    cover,
    albumTitle,
    albumBackground
} = Astro.props;

---

<Layout favicon={cover} title={`${albumTitle} - ${title}`}>
    <SectionContainer class={`flex flex-col gap-y-[4vh] ${albumBackground}`}>
        <Breadcrumb
            albumId={albumId}
            albumTitle={albumTitle}
            imageTitle={title}
        />
        <img 
            src={cover} 
            class="w-auto h-auto aspect-square object-cover" 
            alt={title} 
            transition:name={`transition-cover-${imageId}`}  
        />
    
    </SectionContainer>
</Layout>
